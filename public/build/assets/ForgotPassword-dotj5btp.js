import{d as P,i as g,e as l,o as i,b,a as o,u as V,j as C,k as u,O as x,f as c,p as f,t as m,F,W as O}from"./app-BtxSZjW6.js";import{_ as T,a as S}from"./Footer-H0bPP_si.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"flex justify-center items-start mt-12"},U={class:"bg-white shadow-md rounded-lg p-6 w-full max-w-3xl"},j={class:"flex flex-col md:flex-row"},B={class:"w-full md:w-1/2 flex flex-col items-start justify-center space-y-6"},E={key:0},D={key:1},L={class:"space-y-4"},M={key:0,class:"text-red-500 text-sm"},W={class:"space-y-4"},G={key:0,class:"text-red-500 text-sm"},Y={class:"space-y-4"},q={key:0,class:"text-red-500 text-sm"},z={key:1,class:"text-red-500 text-sm"},A={__name:"ForgotPassword",setup(H){const p=P(1),a=g({userId:"",errors:{}}),n=g({otp:"",errors:{}}),r=g({password:"",password_confirmation:"",errors:{}}),h=()=>{axios.post(route("forgot.send"),{...a}).then(()=>{p.value=2}).catch(e=>{var s,t;a.errors=((t=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:t.errors)||{}})},k=()=>{axios.post(route("forgot.verify"),{userId:a.userId,...n}).then(e=>{const{data:s}=e.data;s?p.value=3:n.errors.otp=["Invalid OTP"]}).catch(e=>{var s,t;n.errors=((t=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:t.errors)||{}})},I=()=>{axios.post(route("forgot.password"),{...r,userId:a.userId}).then(e=>{const{message:s}=e.data;alert(s),O.get(route("login"))}).catch(e=>{var s,t;r.errors=((t=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:t.errors)||{}})};return(e,s)=>{var t,y,w,v,_;return i(),l(F,null,[b(V(C),{title:"Login"}),b(T),o("div",N,[o("div",U,[o("div",j,[o("div",B,[(t=e.$page.props.auth)!=null&&t.user?(i(),l("div",E,[s[5]||(s[5]=o("p",{class:"text-gray-800"},"You are logged in",-1)),o("button",{onClick:s[0]||(s[0]=d=>e.$inertia.get(e.route("dashboard"))),type:"submit",class:"mt-6 w-60 bg-black text-white py-2 rounded-md hover:bg-black mx-auto block"},"Go to dashboard")])):(i(),l("div",D,[s[9]||(s[9]=o("p",{class:"text-2xl font-bold text-gray-900 mb-4"},"Forgot Password",-1)),u(o("div",L,[s[6]||(s[6]=o("p",{class:"text-gray-600 text-sm"},"Enter your registered mobile no",-1)),u(o("input",{"onUpdate:modelValue":s[1]||(s[1]=d=>a.userId=d),type:"text",placeholder:"Email/Mobile",class:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[f,a.userId]]),(y=a.errors)!=null&&y.userId?(i(),l("p",M,m(a.errors.userId),1)):c("",!0),o("button",{onClick:h,class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"}," Send OTP ")],512),[[x,p.value===1]]),u(o("div",W,[s[7]||(s[7]=o("p",{class:"text-gray-600 text-sm"},"Verify OTP",-1)),u(o("input",{"onUpdate:modelValue":s[2]||(s[2]=d=>n.otp=d),type:"text",placeholder:"OTP",class:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[f,n.otp]]),(w=n.errors)!=null&&w.otp?(i(),l("p",G,m(n.errors.otp),1)):c("",!0),o("button",{onClick:k,class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"}," Verify OTP ")],512),[[x,p.value===2]]),u(o("div",Y,[s[8]||(s[8]=o("p",{class:"text-gray-600 text-sm"},"Set Password",-1)),u(o("input",{"onUpdate:modelValue":s[3]||(s[3]=d=>r.password=d),type:"password",placeholder:"New Password",class:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[f,r.password]]),(v=r.errors)!=null&&v.password?(i(),l("p",q,m(r.errors.password),1)):c("",!0),u(o("input",{"onUpdate:modelValue":s[4]||(s[4]=d=>r.password_confirmation=d),type:"password",placeholder:"Confirm Password",class:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[f,r.password_confirmation]]),(_=r.errors)!=null&&_.password_confirmation?(i(),l("p",z,m(r.errors.password_confirmation),1)):c("",!0),o("button",{onClick:I,type:"submit",class:"mt-6 w-60 bg-black text-white py-2 rounded-md hover:bg-black mx-auto block"},"Login")],512),[[x,p.value===3]])]))])])])]),b(S)],64)}}},R=$(A,[["__scopeId","data-v-b5d7c836"]]);export{R as default};
