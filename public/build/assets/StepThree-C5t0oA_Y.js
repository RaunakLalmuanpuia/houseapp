import{s as C,A as j,d as p,e as s,o as r,b as g,a as t,f as b,g as q,F as x,h as y,t as i,l as f,v as _,u as n,p as h,y as H,W as S}from"./app-B-B9-iL_.js";import{H as M,_ as U}from"./Footer-amlBEM08.js";import{D as B}from"./DestinationStep-BVWm3Qgi.js";import{u as T}from"./useNonOfficialApplicationStore-CJtkA6ay.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"min-h-screen flex flex-col"},O={class:"flex-grow flex flex-col items-center w-[400px] p-3 mx-auto"},z={key:0,class:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white p-4 rounded-lg shadow-lg w-[90%] max-w-md z-50"},K={class:"flex justify-between items-start"},L={class:"text-sm mt-2 list-disc list-inside"},P={class:"max-w-md w-full rounded-xl border border-gray-200 overflow-hidden"},W={class:"bg-white p-6 space-y-6"},$=["value"],G={key:0},I=["value"],Y={key:1,class:"text-red-500 text-sm mt-1 block"},J=["value"],Q={key:0,class:"text-red-500 text-sm mt-1 block"},R={key:0,class:"text-red-500 text-sm mt-1 block"},X={class:"flex items-start space-x-3 pb-6 text-gray-600 text-sm font-semibold leading-relaxed"},Z={key:3,class:"text-red-500 text-sm block"},se={__name:"StepThree",props:{states:Array},setup(k){const a=T(),D=k,u=C(()=>D.states.find(d=>d.id===a.state_id));j(()=>{u.value&&u.value.houses.length===1?a.location=u.value.houses[0].id:a.location=""});const m=p(!1),c=p(""),o=p({}),v=p(!1);function N(){return o.value={},a.location||(o.value.location="Location is required."),a.start_date?isNaN(Date.parse(a.start_date))&&(o.value.start_date="Start date must be a valid date."):o.value.start_date="Start date is required.",a.end_date?isNaN(Date.parse(a.end_date))?o.value.end_date="End date must be a valid date.":new Date(a.end_date)<new Date(a.start_date)&&(o.value.end_date="End date cannot be before start date."):o.value.end_date="End date is required.",v.value||(o.value.agreement="You must agree to the terms."),Object.keys(o.value).length===0}function V(){if(!N()){m.value=!0;return}S.get(route("apply.non-official.verify"),{contact:a.contact,type:a.type},{preserveState:!0,replace:!0,onError:d=>{if(m.value=!0,d)if(typeof d=="string")c.value=d;else if(typeof d=="object"){const e=Object.values(d)[0];Array.isArray(e)?c.value=e[0]:c.value=e}else c.value="An unexpected error occurred."}})}function A(){S.visit(route("apply.non-official.step-two"))}return(d,e)=>{var w;return r(),s("div",F,[g(M),t("div",O,[g(B,{class:"w-full"}),m.value?(r(),s("div",z,[t("div",K,[t("div",null,[e[6]||(e[6]=t("b",{class:"block"},"Please correct the following error(s):",-1)),t("ul",L,[(r(!0),s(x,null,y(o.value,(l,E)=>(r(),s("li",{key:E},i(l),1))),128)),q(" "+i(c.value),1)])]),t("button",{onClick:e[0]||(e[0]=l=>m.value=!1),class:"ml-4 text-white font-bold text-xl leading-none"},"Ã—")])])):b("",!0),t("div",P,[t("div",W,[e[14]||(e[14]=t("h2",{class:"font-bold text-lg leading-6 border-l-4 border-black pl-2"},"Kal Duhna Hmun",-1)),t("div",null,[e[8]||(e[8]=t("label",{class:"block font-semibold text-sm leading-5 mb-1 text-black"},"Select State",-1)),f(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>n(a).state_id=l),class:"w-full rounded-md border border-gray-300 px-4 py-2 text-base leading-6 focus:outline-none focus:ring-2 focus:ring-black focus:border-black"},[e[7]||(e[7]=t("option",{disabled:"",value:""},"Select State",-1)),(r(!0),s(x,null,y(k.states,l=>(r(),s("option",{key:l.id,value:l.id},i(l.name),9,$))),128))],512),[[_,n(a).state_id]])]),((w=u.value)==null?void 0:w.houses.length)>1?(r(),s("div",G,[e[10]||(e[10]=t("label",{for:"location",class:"block font-semibold text-sm leading-5 mb-1 text-black"},"Mizoram House Kal duhna",-1)),f(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>n(a).location=l),id:"location",class:"w-full rounded-md border border-gray-300 text-gray-800 placeholder-gray-400 px-4 py-2 text-base leading-6 focus:outline-none focus:ring-2 focus:ring-black focus:border-black appearance-none"},[e[9]||(e[9]=t("option",{disabled:"",value:""},"Select House",-1)),(r(!0),s(x,null,y(u.value.houses,l=>(r(),s("option",{key:l.id,value:l.id},i(l.name),9,I))),128))],512),[[_,n(a).location]])])):b("",!0),o.value.location?(r(),s("span",Y,i(o.value.location),1)):(r(),s("input",{key:2,type:"hidden",value:n(a).location},null,8,J)),e[15]||(e[15]=t("h2",{class:"font-bold text-lg leading-6 border-l-4 border-black pl-2"},"Period",-1)),t("div",null,[e[11]||(e[11]=t("label",{for:"start_date",class:"block font-semibold text-sm leading-5 mb-1 text-black"},"Arrival/Thlen ni",-1)),f(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>n(a).start_date=l),required:"",id:"designation",type:"date",placeholder:"Ni leh thla thlanna",class:"w-full rounded-md border border-gray-300 text-gray-800 placeholder-gray-400 px-4 py-2 text-base leading-6 focus:outline-none focus:ring-2 focus:ring-black focus:border-black"},null,512),[[h,n(a).start_date]]),o.value.start_date?(r(),s("span",Q,i(o.value.start_date),1)):b("",!0)]),t("div",null,[e[12]||(e[12]=t("label",{for:"end_date",class:"block font-semibold text-sm leading-5 mb-1 text-black"},"Departure/Chhuah ni",-1)),f(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>n(a).end_date=l),required:"",id:"designation",type:"date",placeholder:"Ni leh thla thlanna",class:"w-full rounded-md border border-gray-300 text-gray-800 placeholder-gray-400 px-4 py-2 text-base leading-6 focus:outline-none focus:ring-2 focus:ring-black focus:border-black"},null,512),[[h,n(a).end_date]]),o.value.end_date?(r(),s("span",R,i(o.value.end_date),1)):b("",!0)]),t("div",X,[f(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>v.value=l),type:"checkbox",id:"agreement",name:"agreement",class:"mt-1 w-4 h-4 border border-gray-400 rounded-sm text-black focus:ring-0","aria-describedby":"agreement-desc"},null,512),[[H,v.value]]),e[13]||(e[13]=t("label",{for:"agreement",id:"agreement-desc",class:"block max-w-prose"}," I understand that all reservations are subject to seat availability, and GAD holds no responsibility if accommodation is denied due to a lack of available rooms. ",-1))]),o.value.agreement?(r(),s("span",Z,i(o.value.agreement),1)):b("",!0),e[16]||(e[16]=t("hr",{class:"border-t border-gray-200 mt-6"},null,-1)),t("div",{class:"flex gap-4 mt-6"},[t("button",{onClick:A,type:"button",class:"border border-black rounded-lg py-3 text-base font-normal leading-6 text-black flex-grow"}," Back "),t("button",{onClick:V,type:"submit",class:"bg-black rounded-lg py-3 text-base font-normal leading-6 text-white flex-grow-[2]"}," Submit ")])])])]),g(U)])}}};export{se as default};
