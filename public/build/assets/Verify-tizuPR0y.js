import{x as j,d as a,C as A,e as c,o as d,b as m,a as s,u as b,k as E,f as O,g as x,t as f,F as w,h as C,n as S,W as $,l as T,p as D}from"./app-Bwjzm4_E.js";import{_ as N,a as M}from"./Footer-BHRaPJVV.js";import{u as P}from"./useNotOnDutyApplicationStore-f86pSPot.js";const B={class:"min-h-screen flex flex-col"},I={key:0,class:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white p-4 rounded-lg shadow-lg w-[90%] max-w-md z-50"},z={class:"flex justify-between items-start"},F={class:"flex-grow flex flex-col items-center bg-background mt-4"},U={class:"max-w-md w-full"},W={class:"bg-white border border-gray-300 rounded-xl p-8"},L={class:"text-gray-500 text-sm mb-6"},R={class:"flex justify-center space-x-4 mb-6"},q=["onUpdate:modelValue"],G={class:"flex justify-between text-sm text-gray-700"},X={__name:"Verify",setup(H){const n=P(),g=j({...n.$state,otp:""}),r=a(["","","",""]),_=()=>{g.otp=r.value.join("")},i=a(!1),o=a(""),l=a(!0),u=a(120),y=()=>{u.value=120,l.value=!0;const t=setInterval(()=>{--u.value<=0&&(l.value=!1,clearInterval(t))},1e3)};A(()=>{y()});function h(){g.post(route("apply.not-on-duty.submit"),{onSuccess:()=>{n.reset()},onError:t=>{if(i.value=!0,t)if(typeof t=="string")o.value=t;else if(typeof t=="object"){const e=Object.values(t)[0];Array.isArray(e)?o.value=e[0]:o.value=e}else o.value="An unexpected error occurred."}})}function k(){$.get(route("apply.not-on-duty.verify"),{contact:n.contact,type:n.type},{preserveState:!0,replace:!0,onError:t=>{if(i.value=!0,t)if(typeof t=="string")o.value=t;else if(typeof t=="object"){const e=Object.values(t)[0];Array.isArray(e)?o.value=e[0]:o.value=e}else o.value="An unexpected error occurred."},onSuccess:t=>{y()}})}return(t,e)=>(d(),c(w,null,[m(b(E),{title:"Verify"}),s("div",B,[m(N),i.value?(d(),c("div",I,[s("div",z,[s("div",null,[e[3]||(e[3]=s("b",{class:"block"},"Please correct the following error(s):",-1)),x(" "+f(o.value),1)]),s("button",{onClick:e[0]||(e[0]=p=>i.value=!1),class:"ml-4 text-white font-bold text-xl leading-none"},"Ã—")])])):O("",!0),s("div",F,[s("div",U,[s("div",W,[e[5]||(e[5]=s("h2",{class:"text-gray-900 font-semibold text-xl mb-2"},"Enter OTP to verify",-1)),s("p",L,[x(" An OTP has been sent to "+f(b(n).contact)+" ",1),s("span",{onClick:e[1]||(e[1]=p=>t.$inertia.get(t.route("apply.not-on-duty.step-two"))),class:"text-green-600 cursor-pointer"},"(Edit)")]),s("div",R,[(d(!0),c(w,null,C(r.value,(p,v)=>T((d(),c("input",{key:v,"onUpdate:modelValue":V=>r.value[v]=V,type:"text",maxlength:"1",inputmode:"numeric",pattern:"[0-9]*",class:"w-12 h-12 border border-gray-300 rounded-lg text-center text-lg font-normal text-gray-900 focus:outline-none focus:ring-2 focus:ring-green-600",onInput:_},null,40,q)),[[D,r.value[v]]])),128))]),s("div",G,[s("p",null,[e[4]||(e[4]=x(" Did not get the OTP? ")),s("span",{class:S({"text-gray-400 cursor-not-allowed":l.value,"text-blue-600 cursor-pointer":!l.value}),onClick:e[2]||(e[2]=p=>!l.value&&k())}," Resend",2)]),s("p",null,f(Math.floor(u.value/60))+":"+f((u.value%60).toString().padStart(2,"0")),1)])]),s("button",{onClick:h,type:"submit",class:"mt-6 w-full bg-black text-white py-3 rounded-lg text-center text-base font-normal"}," Verify ")])]),m(M)])],64))}};export{X as default};
