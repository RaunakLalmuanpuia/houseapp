import{x as j,d as n,B as A,e as c,o as d,b as v,a as s,u as y,k as E,f as O,g as x,t as f,F as w,h as S,n as $,W as C,l as T,p as B}from"./app-BRd7Rtbq.js";import{_ as D,a as M}from"./Footer-DCcPo0GZ.js";import{u as N}from"./useFlamApplicationStore-Dm4HEPQf.js";const P={class:"min-h-screen flex flex-col"},F={key:0,class:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white p-4 rounded-lg shadow-lg w-[90%] max-w-md z-50"},I={class:"flex justify-between items-start"},z={class:"flex-grow flex flex-col items-center bg-background mt-4"},U={class:"max-w-md w-full"},W={class:"bg-white border border-gray-300 rounded-xl p-8"},L={class:"text-gray-500 text-sm mb-6"},R={class:"flex justify-center space-x-4 mb-6"},q=["onUpdate:modelValue"],G={class:"flex justify-between text-sm text-gray-700"},X={__name:"Verify",setup(H){const l=N(),g=j({...l.$state,otp:""}),r=n(["","","",""]),_=()=>{g.otp=r.value.join("")},i=n(!1),o=n(""),a=n(!0),u=n(120),b=()=>{u.value=120,a.value=!0;const t=setInterval(()=>{--u.value<=0&&(a.value=!1,clearInterval(t))},1e3)};A(()=>{b()});function h(){g.post(route("apply.flam.submit"),{onSuccess:()=>{l.reset()},onError:t=>{if(i.value=!0,t)if(typeof t=="string")o.value=t;else if(typeof t=="object"){const e=Object.values(t)[0];Array.isArray(e)?o.value=e[0]:o.value=e}else o.value="An unexpected error occurred."}})}function k(){C.get(route("apply.flam.verify"),{contact:l.contact,type:l.type},{preserveState:!0,replace:!0,onError:t=>{if(i.value=!0,t)if(typeof t=="string")o.value=t;else if(typeof t=="object"){const e=Object.values(t)[0];Array.isArray(e)?o.value=e[0]:o.value=e}else o.value="An unexpected error occurred."},onSuccess:t=>{b()}})}return(t,e)=>(d(),c(w,null,[v(y(E),{title:"Verify"}),s("div",P,[v(D),i.value?(d(),c("div",F,[s("div",I,[s("div",null,[e[3]||(e[3]=s("b",{class:"block"},"Please correct the following error(s):",-1)),x(" "+f(o.value),1)]),s("button",{onClick:e[0]||(e[0]=p=>i.value=!1),class:"ml-4 text-white font-bold text-xl leading-none"},"Ã—")])])):O("",!0),s("div",z,[s("div",U,[s("div",W,[e[5]||(e[5]=s("h2",{class:"text-gray-900 font-semibold text-xl mb-2"},"Enter OTP to verify",-1)),s("p",L,[x(" An OTP has been sent to "+f(y(l).contact)+" ",1),s("span",{onClick:e[1]||(e[1]=p=>t.$inertia.get(t.route("apply.flam.step-two"))),class:"text-green-600 cursor-pointer"},"(Edit)")]),s("div",R,[(d(!0),c(w,null,S(r.value,(p,m)=>T((d(),c("input",{key:m,"onUpdate:modelValue":V=>r.value[m]=V,type:"text",maxlength:"1",inputmode:"numeric",pattern:"[0-9]*",class:"w-12 h-12 border border-gray-300 rounded-lg text-center text-lg font-normal text-gray-900 focus:outline-none focus:ring-2 focus:ring-green-600",onInput:_},null,40,q)),[[B,r.value[m]]])),128))]),s("div",G,[s("p",null,[e[4]||(e[4]=x(" Did not get the OTP? ")),s("span",{class:$({"text-gray-400 cursor-not-allowed":a.value,"text-blue-600 cursor-pointer":!a.value}),onClick:e[2]||(e[2]=p=>!a.value&&k())}," Resend",2)]),s("p",null,f(Math.floor(u.value/60))+":"+f((u.value%60).toString().padStart(2,"0")),1)])]),s("button",{onClick:h,type:"submit",class:"mt-6 w-full bg-black text-white py-3 rounded-lg text-center text-base font-normal"}," Verify ")])]),v(M)])],64))}};export{X as default};
