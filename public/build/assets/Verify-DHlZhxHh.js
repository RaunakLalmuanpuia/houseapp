import{x as k,d as l,B as j,e as c,o as d,b as y,f as A,a as s,g as m,t as f,u as E,F as O,h as V,n as S,W as C,l as T,p as $}from"./app-BpqW6WBf.js";import{H as D,_ as N}from"./Footer-X4FS5C-L.js";import{u as B}from"./useNotOnDutyApplicationStore-ChW5HcmR.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"min-h-screen flex flex-col"},P={key:0,class:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white p-4 rounded-lg shadow-lg w-[90%] max-w-md z-50"},I={class:"flex justify-between items-start"},z={class:"flex-grow flex flex-col items-center bg-background mt-4"},F={class:"max-w-md w-full"},H={class:"bg-white border border-gray-300 rounded-xl p-8"},U={class:"text-gray-500 text-sm mb-6"},W={class:"flex justify-center space-x-4 mb-6"},L=["onUpdate:modelValue"],R={class:"flex justify-between text-sm text-gray-700"},X={__name:"Verify",setup(q){const n=B(),x=k({...n.$state,otp:""}),a=l(["","","",""]),b=()=>{x.otp=a.value.join("")},i=l(!1),o=l(""),r=l(!0),u=l(120),g=()=>{u.value=120,r.value=!0;const t=setInterval(()=>{--u.value<=0&&(r.value=!1,clearInterval(t))},1e3)};j(()=>{g()});function w(){x.post(route("apply.not-on-duty.submit"),{onSuccess:()=>{n.reset()},onError:t=>{if(i.value=!0,t)if(typeof t=="string")o.value=t;else if(typeof t=="object"){const e=Object.values(t)[0];Array.isArray(e)?o.value=e[0]:o.value=e}else o.value="An unexpected error occurred."}})}function _(){C.get(route("apply.not-on-duty.verify"),{contact:n.contact,type:n.type},{preserveState:!0,replace:!0,onError:t=>{if(i.value=!0,t)if(typeof t=="string")o.value=t;else if(typeof t=="object"){const e=Object.values(t)[0];Array.isArray(e)?o.value=e[0]:o.value=e}else o.value="An unexpected error occurred."},onSuccess:t=>{g()}})}return(t,e)=>(d(),c("div",M,[y(D),i.value?(d(),c("div",P,[s("div",I,[s("div",null,[e[3]||(e[3]=s("b",{class:"block"},"Please correct the following error(s):",-1)),m(" "+f(o.value),1)]),s("button",{onClick:e[0]||(e[0]=p=>i.value=!1),class:"ml-4 text-white font-bold text-xl leading-none"},"Ã—")])])):A("",!0),s("div",z,[s("div",F,[s("div",H,[e[5]||(e[5]=s("h2",{class:"text-gray-900 font-semibold text-xl mb-2"},"Enter OTP to verify",-1)),s("p",U,[m(" An OTP has been sent to "+f(E(n).contact)+" ",1),s("span",{onClick:e[1]||(e[1]=p=>t.$inertia.get(t.route("apply.not-on-duty.step-two"))),class:"text-green-600 cursor-pointer"},"(Edit)")]),s("div",W,[(d(!0),c(O,null,V(a.value,(p,v)=>T((d(),c("input",{key:v,"onUpdate:modelValue":h=>a.value[v]=h,type:"text",maxlength:"1",inputmode:"numeric",pattern:"[0-9]*",class:"w-12 h-12 border border-gray-300 rounded-lg text-center text-lg font-normal text-gray-900 focus:outline-none focus:ring-2 focus:ring-green-600",onInput:b},null,40,L)),[[$,a.value[v]]])),128))]),s("div",R,[s("p",null,[e[4]||(e[4]=m(" Did not get the OTP? ")),s("span",{class:S({"text-gray-400 cursor-not-allowed":r.value,"text-blue-600 cursor-pointer":!r.value}),onClick:e[2]||(e[2]=p=>!r.value&&_())}," Resend",2)]),s("p",null,f(Math.floor(u.value/60))+":"+f((u.value%60).toString().padStart(2,"0")),1)])]),s("button",{onClick:w,type:"submit",class:"mt-6 w-full bg-black text-white py-3 rounded-lg text-center text-base font-normal"}," Verify ")])]),y(N)]))}};export{X as default};
